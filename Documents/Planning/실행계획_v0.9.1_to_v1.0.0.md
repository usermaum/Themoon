# 📋 실행 계획: v0.9.1 → v1.0.0

> **작성일**: 2025-11-02
> **현재 버전**: v0.9.1
> **목표 버전**: v1.0.0
> **예상 기간**: 4주 (약 1개월)
> **상태**: 계획 완료, 실행 대기

---

## 📊 현재 상태 분석 (v0.9.1)

### ✅ 완료된 항목

**Phase 2: 백엔드 (95% 완료)**
```
✅ DB 스키마: 13개 테이블 (목표 10개 초과 달성)
   - beans, blends, blend_recipes, blend_recipes_history
   - inventory, transactions, roasting_logs, cost_settings
   - users, user_permissions, audit_logs, loss_rate_warnings
   - sqlite_sequence

✅ 백엔드 서비스: 9개 서비스 모두 구현
   - BeanService (91% 커버리지)
   - BlendService (92% 커버리지)
   - RoastingService (100% 커버리지)
   - CostService (90% 커버리지)
   - AnalyticsService (99% 커버리지)
   - AuthService (96% 커버리지)
   - LossRateAnalyzer (100% 커버리지)
   - ExcelService (0% 커버리지) ⚠️
   - ReportService (78% 커버리지) ⚠️

✅ 테스트: 188개 테스트 100% 통과
   - 전체 커버리지: 84%
   - 목표: 90%+ (6%p 부족)
```

**Phase 3: 프론트엔드 (60% 완료)**
```
✅ 구현된 페이지: 9개
   - Dashboard.py - 대시보드
   - BeanManagement.py - 원두 관리 (추가 기능)
   - BlendManagement.py - 블렌드 관리
   - InventoryManagement.py - 재고 관리 (추가 기능)
   - Analysis.py - 분석
   - AdvancedAnalysis.py - 고급 분석 (추가 기능)
   - Report.py - 보고서
   - ExcelSync.py - Excel 동기화 (추가 기능)
   - Settings.py - 설정
```

### ⚠️ 미완료 항목

**Phase 1: 데이터 (상태 불명)**
```
❓ 13종 원두 마스터 데이터 등록 여부
❓ 블렌드 혼합률 설정 여부
❓ 실제 로스팅 데이터 마이그레이션 여부 (2개월분 60개 레코드)
❓ 원가 정보 입력 여부
```

**Phase 2: 백엔드 (5% 미완료)**
```
❌ ExcelService 테스트 (0% → 80%+ 목표)
⚠️ ReportService 테스트 확장 (78% → 90%+ 목표)
❓ 코드 리뷰 상태 불명
```

**Phase 3: 프론트엔드 (40% 미완료)**
```
❌ RoastingRecord.py - 로스팅 단일 입력 (핵심!)
❌ RoastingReceipt.py - 영수증 형식 그리드 입력 (핵심!)
❌ CostCalculation.py - 원가 계산 페이지
❌ Login.py - 로그인 페이지
```

**Phase 4: 통합 테스트 (80% 미완료)**
```
❌ E2E 통합 테스트
❌ 성능 테스트
❌ UAT (사용자 수용 테스트)
```

**Phase 5: 배포 (90% 미완료)**
```
❌ 운영 매뉴얼
❌ 직원 교육
⚠️ 프로덕션 배포 준비
```

---

## 🎯 v1.0.0 목표

### 핵심 목표
1. ✅ **모든 핵심 페이지 구현** (특히 로스팅 입력 2개)
2. ✅ **테스트 커버리지 90%+ 달성**
3. ✅ **데이터 완전성 검증**
4. ✅ **프로덕션 배포 준비 완료**

### 완료 조건
```
□ 4개 미구현 페이지 완성
□ 테스트 커버리지 90%+
□ 데이터 검증 완료
□ 통합 테스트 통과
□ 운영 매뉴얼 작성
□ 성능 목표 달성 (대시보드 <2초, 그리드 <1초)
```

---

## 📅 4주 실행 계획

### Week 1: 데이터 검증 + 테스트 개선 (기초 다지기)

#### Day 1: 데이터 상태 확인 및 검증
**목표**: Phase 1 상태 파악

```python
작업 내용:
□ DB 데이터 확인 스크립트 작성
  - beans 테이블: 13종 원두 확인
  - blends 테이블: 풀문, 뉴문 확인
  - blend_recipes: 혼합률(%) 확인
  - roasting_logs: 실제 데이터 개수 확인
  - cost_settings: 원가 정보 확인

□ 데이터 검증 로직 실행
  - 손실률 검증 (16~18% 범위)
  - 혼합률 검증 (합계 100%)
  - NULL 값 검증
  - 중복 검증
  - 외래키 무결성 검증

□ 검증 리포트 생성
  - app/scripts/validate_data.py
  - 결과: Documents/Progress/DATA_VALIDATION_REPORT.md

산출물:
- 데이터 검증 스크립트
- 검증 리포트 문서
```

#### Day 2-3: ExcelService 테스트 작성
**목표**: 커버리지 0% → 80%+

```python
작업 내용:
□ 테스트 파일 생성: app/tests/test_excel_service.py

□ 테스트 케이스 작성
  1. Excel 읽기 테스트
     - 정상 파일 읽기
     - 형식 오류 처리
     - 빈 파일 처리

  2. Excel 쓰기 테스트
     - 로스팅 데이터 내보내기
     - 블렌드 데이터 내보내기
     - 형식 검증

  3. 데이터 동기화 테스트
     - Excel → DB 동기화
     - DB → Excel 동기화
     - 데이터 일치성 검증

  4. 마이그레이션 테스트
     - Sheet1 데이터 파싱
     - 손실률 자동 계산
     - 에러 처리

□ 테스트 실행 및 검증
  - pytest app/tests/test_excel_service.py -v --cov
  - 목표: 80%+ 커버리지

산출물:
- test_excel_service.py (30+ 테스트)
- 커버리지 리포트
```

#### Day 4-5: ReportService 테스트 확장
**목표**: 커버리지 78% → 90%+

```python
작업 내용:
□ 미테스트 영역 파악
  - 커버리지 리포트 분석
  - 미테스트 함수 식별

□ 추가 테스트 작성
  1. PDF 리포트 생성 테스트
  2. Excel 리포트 생성 테스트
  3. 월간/분기/연간 리포트 테스트
  4. 에러 처리 테스트

□ 테스트 실행 및 검증
  - pytest app/tests/test_report_service.py -v --cov
  - 목표: 90%+ 커버리지

산출물:
- 추가 테스트 케이스 (10+ 테스트)
- 전체 커버리지 84% → 88%+
```

---

### Week 2: 핵심 페이지 구현 (로스팅 입력)

#### Day 6-7: RoastingRecord.py 구현
**목표**: 로스팅 단일 입력 페이지 완성

```python
작업 내용:
□ 페이지 구조 설계
  - 레이아웃 디자인 (3컬럼)
  - 입력 폼 구성
  - 버튼 배치

□ 핵심 기능 구현
  1. 입력 폼
     - 원두 선택 (드롭다운)
     - 생두량 입력 (kg)
     - 로스팅량 입력 (kg)
     - 로스팅 날짜 선택
     - 비고 입력 (텍스트)

  2. 자동 계산
     - 손실률 = (생두량 - 로스팅량) / 생두량 × 100
     - 손실률 표시 (게이지 차트)

  3. 데이터 검증
     - 생두량 > 0
     - 로스팅량 > 0
     - 로스팅량 <= 생두량
     - 손실률 16~25% (경고 표시)

  4. 저장 기능
     - RoastingService.create_roasting_log() 호출
     - 성공/실패 메시지
     - 입력 폼 초기화

□ UI/UX 개선
  - 실시간 손실률 계산 표시
  - 에러 메시지 명확화
  - 성공 시 최근 기록 표시

□ 테스트
  - 수동 테스트 (UI 동작 확인)
  - 데이터 저장 확인

산출물:
- app/pages/RoastingRecord.py
- 스크린샷 (Documents/Resources/)
```

#### Day 8-10: RoastingReceipt.py 구현
**목표**: 영수증 형식 월별 그리드 입력 완성

```python
작업 내용:
□ 페이지 구조 설계
  - 월 선택 UI (드롭다운)
  - 그리드 레이아웃 (st.data_editor)
  - 버튼 배치 (저장, 다운로드)

□ 그리드 구현
  1. 데이터 구조
     - 행: 원두별 (13종)
     - 열: 생두량(kg), 로스팅량(kg), 손실률(%)
     - 손실률 자동 계산 (read-only)

  2. 월별 데이터 로딩
     - RoastingService.get_monthly_records(month)
     - 기존 데이터 표시
     - 빈 행 초기화

  3. 편집 기능
     - st.data_editor로 그리드 편집
     - 실시간 손실률 계산
     - 셀 유효성 검증

  4. 일괄 저장
     - RoastingService.save_monthly_batch(records)
     - 트랜잭션 처리 (모두 성공 or 모두 롤백)
     - 저장 후 그리드 새로고침

□ 추가 기능
  1. Excel 다운로드
     - 현재 그리드 → Excel 파일
     - 영수증 형식 (헤더, 합계 포함)

  2. 통계 표시
     - 월별 총 생두량
     - 월별 총 로스팅량
     - 월별 평균 손실률

□ UI/UX 개선
  - 손실률 색상 구분 (정상: 초록, 경고: 노랑, 위험: 빨강)
  - 툴팁 안내 메시지
  - 로딩 인디케이터

□ 테스트
  - 월별 데이터 로딩 확인
  - 편집 기능 확인
  - 일괄 저장 확인
  - Excel 다운로드 확인

산출물:
- app/pages/RoastingReceipt.py
- 스크린샷 (Documents/Resources/)
- 테스트 시나리오 문서
```

---

### Week 3: 추가 페이지 + UI/UX 개선

#### Day 11-12: CostCalculation.py 구현
**목표**: 원가 계산 페이지 완성

```python
작업 내용:
□ 페이지 구조 설계
  - 블렌드 선택 UI
  - 원가 계산 결과 표시
  - 수익성 분석 차트

□ 핵심 기능 구현
  1. 블렌드 선택
     - 드롭다운 (풀문, 뉴문)
     - 블렌드 정보 표시

  2. 원가 계산 표시
     - CostService.get_blend_cost() 호출
     - 테이블 형식 표시:
       * 원두명 | 혼합률(%) | 생두원가(원/kg) | 혼합원가(원)
       * 합계: 혼합 총 원가
       * 손실률 반영 (17%)
       * 최종 원가 (로스팅 후 기준)

  3. 수익성 분석
     - 판매가 표시
     - 수익 = 판매가 - 최종 원가
     - 마진율 = 수익 / 판매가 × 100
     - 게이지 차트로 마진율 시각화

  4. 시뮬레이션 (선택 기능)
     - 원두 가격 변경 시 영향도
     - 혼합률 변경 시 영향도
     - "What-if" 분석

□ UI/UX
  - 파이 차트: 혼합률 시각화
  - 바 차트: 원두별 원가 비교
  - 색상: 수익(초록), 손실(빨강)

□ 테스트
  - 원가 계산 정확성 검증
  - 수익성 분석 확인

산출물:
- app/pages/CostCalculation.py
- 스크린샷
```

#### Day 13: Login.py 구현
**목표**: 로그인 페이지 완성

```python
작업 내용:
□ 로그인 페이지
  1. 로그인 폼
     - 사용자명 입력
     - 비밀번호 입력
     - 로그인 버튼

  2. 인증 처리
     - AuthService.authenticate() 호출
     - 세션 저장 (st.session_state)
     - 성공 시 대시보드로 리다이렉트
     - 실패 시 에러 메시지

□ 권한 미들웨어
  1. 페이지 접근 제어
     - @require_login 데코레이터
     - 미로그인 시 로그인 페이지로 리다이렉트

  2. 권한별 메뉴 표시
     - Admin: 모든 메뉴
     - Editor: 읽기/쓰기 메뉴
     - Viewer: 읽기 전용 메뉴

□ 로그아웃
  - 세션 초기화
  - 로그인 페이지로 리다이렉트

산출물:
- app/pages/Login.py
- app/utils/auth_middleware.py
```

#### Day 14: 네비게이션 개선
**목표**: 페이지 간 이동 개선

```python
작업 내용:
□ 사이드바 메뉴 정리
  - 카테고리별 그룹화
    * 로스팅 관리
    * 원가 관리
    * 분석 & 리포트
    * 설정

  - 권한별 표시/숨김
  - 현재 페이지 하이라이트

□ 페이지 간 데이터 전달
  - st.session_state 활용
  - 쿼리 파라미터 활용

산출물:
- app/components/sidebar.py
```

#### Day 15-16: UI/UX 최적화
**목표**: 성능 및 사용성 개선

```python
작업 내용:
□ 성능 최적화
  1. 캐싱 전략
     - @st.cache_data 적용 (서비스 함수)
     - @st.cache_resource 적용 (DB 연결)

  2. DB 쿼리 최적화
     - 인덱스 활용 확인
     - N+1 문제 해결

  3. 페이지 로딩 최적화
     - 지연 로딩 (lazy loading)
     - 프로그레스바 추가

□ 반응형 디자인
  - 모바일 호환성 테스트
  - 레이아웃 조정

□ 사용성 개선
  - 에러 메시지 명확화
  - 툴팁 추가
  - 로딩 인디케이터
  - 성공/실패 피드백

□ 성능 측정
  - 페이지 로딩 시간
  - DB 쿼리 응답 시간
  - 목표:
    * 대시보드 <2초
    * 그리드 <1초
    * 분석 <2.5초

산출물:
- 성능 측정 리포트
```

---

### Week 4: 통합 테스트 + 문서화 + 배포 준비

#### Day 17-19: E2E 테스트
**목표**: 전체 시나리오 테스트

```python
작업 내용:
□ 통합 테스트 시나리오 작성
  1. 로스팅 입력 → 원가 계산 → 분석
     - RoastingRecord에서 데이터 입력
     - CostCalculation에서 원가 확인
     - Analysis에서 손실률 확인

  2. 블렌드 변경 → 영향도 분석
     - BlendManagement에서 혼합률 변경
     - CostCalculation에서 원가 변화 확인
     - Analysis에서 수익성 변화 확인

  3. Excel 동기화 → 데이터 일치
     - Excel 파일 업로드
     - DB 데이터 확인
     - Excel 다운로드 후 비교

□ 자동화 테스트 작성
  - app/tests/test_integration.py
  - Selenium 또는 Streamlit Testing 활용

□ 수동 테스트
  - 전체 워크플로우 확인
  - 버그 발견 및 수정

산출물:
- test_integration.py
- 테스트 리포트
```

#### Day 20-21: 성능 테스트 + UAT 준비
**목표**: 성능 검증 및 사용자 테스트 준비

```python
작업 내용:
□ 성능 테스트
  1. 페이지 로딩 시간 측정
  2. DB 쿼리 성능 분석
  3. 대량 데이터 테스트 (1000+ 레코드)

□ UAT 준비
  1. 테스트 시나리오 작성
     - 담당자용: 로스팅 입력
     - 점주용: 분석 & 리포트
     - 직원용: 조회 기능

  2. 테스트 데이터 준비
     - 샘플 데이터 생성
     - 테스트 계정 생성

산출물:
- 성능 테스트 리포트
- UAT 시나리오 문서
```

#### Day 22-24: 문서화 + 배포 준비
**목표**: 운영 매뉴얼 및 배포 준비

```python
작업 내용:
□ 운영 매뉴얼 작성
  1. 설치 가이드
     - 환경 설정
     - 의존성 설치
     - DB 초기화

  2. 사용자 가이드
     - 페이지별 사용법
     - 주요 기능 설명
     - 스크린샷 포함

  3. 관리자 가이드
     - 사용자 관리
     - 권한 설정
     - 백업/복구

  4. 문제 해결 가이드
     - 자주 묻는 질문
     - 에러 메시지 해설
     - 문제 해결 절차

□ 배포 준비
  1. requirements.txt 최신화
  2. 환경 변수 설정 (.env.example)
  3. DB 백업/복구 스크립트
  4. 시작 스크립트 작성

□ 최종 검증
  - 전체 체크리스트 확인
  - 모든 테스트 통과 확인
  - 문서 완성도 확인

산출물:
- 운영 매뉴얼 (Documents/Guides/)
- 배포 스크립트
- 최종 검증 리포트
```

---

## ✅ v1.0.0 완료 체크리스트

### 데이터 (Phase 1)
```
□ 13종 원두 마스터 데이터 등록 확인
□ 블렌드 혼합률 설정 확인 (풀문, 뉴문)
□ 실제 로스팅 데이터 확인 (2개월분)
□ 원가 정보 입력 확인
□ 데이터 검증 완료 (손실률, 혼합률, NULL, 중복)
```

### 백엔드 (Phase 2)
```
□ ExcelService 테스트 80%+
□ ReportService 테스트 90%+
□ 전체 커버리지 90%+
□ 코드 리뷰 완료
```

### 프론트엔드 (Phase 3)
```
□ RoastingRecord.py 완성
□ RoastingReceipt.py 완성
□ CostCalculation.py 완성
□ Login.py 완성
□ 네비게이션 개선 완료
□ UI/UX 최적화 완료
```

### 테스트 (Phase 4)
```
□ E2E 테스트 작성 및 통과
□ 성능 테스트 통과 (목표: 대시보드 <2초, 그리드 <1초)
□ UAT 준비 완료
□ 주요 버그 모두 수정
```

### 문서화 & 배포 (Phase 5)
```
□ 설치 가이드 작성
□ 사용자 가이드 작성 (페이지별)
□ 관리자 가이드 작성
□ 문제 해결 가이드 작성
□ requirements.txt 최신화
□ 배포 스크립트 작성
□ 백업/복구 절차 문서화
```

---

## 📈 진행률 추적

| Phase | 시작 | 현재 | 목표 |
|-------|------|------|------|
| Phase 1 (데이터) | ? | 50%? | 100% |
| Phase 2 (백엔드) | 0% | 95% | 100% |
| Phase 3 (프론트) | 0% | 60% | 100% |
| Phase 4 (테스트) | 0% | 20% | 100% |
| Phase 5 (배포) | 0% | 10% | 100% |
| **전체** | **0%** | **55%** | **100%** |

---

## 🎯 성공 지표

**v1.0.0 릴리스 조건:**
```
✅ 모든 핵심 페이지 동작 (13개 페이지)
✅ 테스트 커버리지 90%+ (현재 84%)
✅ 모든 테스트 통과 (현재 188/188)
✅ 성능 목표 달성 (대시보드 <2초, 그리드 <1초)
✅ 데이터 검증 완료
✅ 운영 매뉴얼 완성
✅ 배포 준비 완료
```

**품질 지표:**
```
- 버그: 0개 (Critical/High)
- 커버리지: 90%+
- 페이지 로딩: <2초
- DB 쿼리: <500ms
- 문서 완성도: 100%
```

---

## 📝 참고 문서

- **마스터플랜**: Documents/Planning/통합_웹사이트_구현_마스터플랜_v2.md
- **Phase2-5 가이드**: Documents/Implementation/Phase2-5_통합구현가이드.md
- **현재 세션 요약**: Documents/Progress/SESSION_SUMMARY_2025-11-02.md
- **버전 관리**: logs/VERSION, logs/CHANGELOG.md

---

**작성**: 2025-11-02
**작성자**: Claude (AI Assistant)
**검토**: 필요
**승인**: 대기
**상태**: ✅ 계획 완료, 실행 대기
