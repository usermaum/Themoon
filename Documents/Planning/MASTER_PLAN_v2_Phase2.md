# 마스터플랜 v2 - Phase 2

> **작성일**: 2025-11-07
> **버전**: v0.21.0
> **전제조건**: Phase 1 완료 (v0.17.0 ~ v0.21.0)

---

## 📋 Phase 1 완료 사항 (v0.17.0 ~ v0.21.0)

### ✅ T1-1: 로스팅 데이터 마이그레이션 (v0.17.0)
- 2개월(2025-09, 2025-10) 테스트 데이터 생성
- 14개 로스팅 기록 (손실률 17%)
- 6종 원두 자동 생성

### ✅ T1-2: 원두 마스터 데이터 설정 (v0.18.0)
- 4종 원두 정보 업데이트
- 6종 필수 원두 검증

### ✅ T1-3: 블렌드 혼합률 설정 (v0.19.0)
- 풀문/뉴문 블렌드 레시피 완성
- 원가 계산 공식 적용

### ✅ 후속 작업
- **v0.20.0**: 뉴문 블렌딩 판매가 조정 (₩4,000 → ₩15,000, 마진 58.3%)
- **v0.21.0**: 전체 17종 원두 정보 완성 (디카페 3종 포함)

---

## 🎯 Phase 2 목표

**테마**: 데이터 분석 및 의사결정 지원 시스템 고도화

**기간**: 2주 ~ 1개월
**예상 버전**: v0.22.0 ~ v0.30.0

---

## 📦 Phase 2 작업 항목

### T2-1: 손실률 분석 시스템 강화 ⭐⭐⭐
**우선순위**: 높음
**예상 시간**: 3~4시간
**목표 버전**: v0.22.0

**작업 내용:**
1. 원두별 손실률 통계 분석
   - 평균 손실률, 표준편차 계산
   - 이상치 탐지 (±3σ)
   - 월별 트렌드 분석

2. 손실률 예측 모델
   - 원두 종류별 예상 손실률 제시
   - 계절/환경 요인 반영

3. 경고 시스템 고도화
   - 실시간 손실률 모니터링
   - 임계값 자동 알림
   - 원인 분석 제안

**산출물:**
- `app/services/loss_analytics_service.py`
- Dashboard 위젯 추가
- 테스트 코드

---

### T2-2: 원가 최적화 시뮬레이터 ⭐⭐
**우선순위**: 중간
**예상 시간**: 2~3시간
**목표 버전**: v0.23.0

**작업 내용:**
1. 블렌드 레시피 시뮬레이션
   - 원두 비율 조정 시 원가 변화 실시간 계산
   - 목표 원가/마진율 설정 가능
   - 최적 레시피 추천

2. What-If 분석
   - 원두 가격 변동 시나리오
   - 손실률 변화 영향 분석
   - 판매가 전략 시뮬레이션

3. 시각화
   - 인터랙티브 차트
   - 비교 분석 그래프

**산출물:**
- `app/pages/CostSimulator.py`
- 시뮬레이터 컴포넌트
- 테스트 코드

---

### T2-3: 재고 예측 및 자동 발주 시스템 ⭐⭐
**우선순위**: 중간
**예상 시간**: 3~4시간
**목표 버전**: v0.24.0

**작업 내용:**
1. 재고 소진 예측
   - 과거 사용량 기반 예측
   - 계절성 반영
   - 안전 재고 계산

2. 자동 발주 알림
   - 재주문 시점 알림
   - 권장 발주량 계산
   - 발주 이력 관리

3. 재고 최적화
   - ABC 분석 (중요도별 분류)
   - EOQ (경제적 주문량) 계산
   - 재고 회전율 분석

**산출물:**
- `app/services/inventory_forecast_service.py`
- InventoryManagement 페이지 개선
- 테스트 코드

---

### T2-4: 수익성 대시보드 강화 ⭐
**우선순위**: 낮음
**예상 시간**: 2시간
**목표 버전**: v0.25.0

**작업 내용:**
1. KPI 지표 추가
   - 총 매출/이익
   - 블렌드별 공헌이익
   - 원두별 수익률
   - 월별 수익 트렌드

2. 시각화 개선
   - 실시간 대시보드
   - 드릴다운 분석
   - 비교 분석 차트

3. 리포트 자동 생성
   - 주간/월간 리포트
   - PDF 내보내기
   - 이메일 자동 발송 (선택)

**산출물:**
- Dashboard 페이지 개선
- 리포트 템플릿
- 테스트 코드

---

### T2-5: 사용자 권한 및 감사 로그 ⭐
**우선순위**: 낮음 (필요 시)
**예상 시간**: 3시간
**목표 버전**: v0.26.0

**작업 내용:**
1. 사용자 역할 세분화
   - Admin, Manager, Viewer
   - 페이지별 접근 권한
   - 기능별 권한 설정

2. 감사 로그 강화
   - 모든 변경사항 기록
   - 변경 전/후 비교
   - 필터링 및 검색

3. 보안 강화
   - 비밀번호 정책
   - 세션 관리
   - 로그인 이력

**산출물:**
- AuthService 개선
- AuditLog 페이지 추가
- 테스트 코드

---

## 📊 Phase 2 일정 (예상)

```
Week 1: T2-1 (손실률 분석) + T2-2 (원가 시뮬레이터)
Week 2: T2-3 (재고 예측) + T2-4 (수익성 대시보드)
Week 3: T2-5 (권한/로그) + 테스트 및 문서화
Week 4: 버그 수정 및 최적화
```

---

## 🎯 Phase 2 성공 기준

### 기능적 목표
- [ ] 손실률 이상 자동 탐지 (±3σ)
- [ ] 블렌드 레시피 최적화 도구 제공
- [ ] 재고 소진 예측 정확도 80% 이상
- [ ] 수익성 KPI 실시간 모니터링

### 기술적 목표
- [ ] 테스트 커버리지 98% 유지
- [ ] 페이지 로딩 시간 < 2초
- [ ] 모든 차트 인터랙티브

### 문서화 목표
- [ ] 각 기능별 사용자 가이드 작성
- [ ] API 문서 완성
- [ ] 아키텍처 다이어그램 업데이트

---

## 💡 Phase 3 후보 (미래)

### 고급 기능
- 머신러닝 기반 수요 예측
- 자동 블렌딩 레시피 생성 AI
- 모바일 앱 개발
- 다국어 지원

### 통합 기능
- ERP 시스템 연동
- POS 시스템 연동
- 회계 시스템 연동

---

## 📝 참고 사항

### 우선순위 결정 기준
- ⭐⭐⭐ 높음: 비즈니스 핵심 기능, 즉시 필요
- ⭐⭐ 중간: 효율성 향상, 1~2주 내 필요
- ⭐ 낮음: Nice-to-have, 시간 여유 있을 때

### 버전 관리 전략
- 각 작업 완료 시 MINOR 버전 증가 (v0.22.0, v0.23.0, ...)
- 버그 수정은 PATCH 증가 (v0.22.1, v0.22.2, ...)
- Phase 2 완료 시 v0.30.0 or v1.0.0 고려

---

**작성자**: Claude Code
**검토자**: -
**승인일**: -
